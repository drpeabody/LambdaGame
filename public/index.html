<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>The Lambda Game</title>
	<style type="text/css">
		body {
			background: #112;
		}
		#login-form {
			color: #fff;
			margin-top: 40vh;
			text-align: center;
		}
		.row {
			overflow-x: hidden;
			width: 100%;
			margin: 40px 0 0 0;
		}
		.label {
			font-size: 2em;
			margin-bottom: 5vh;
		}
	</style>
</head>
<body>
	<div id="login-form">
		<label id="input-form-label" class="label"> Please Click Register if you are logging in for the First Time.</label>
		<div class="row">
			Username: <input type="text" name="UserName" id="username">
		</div>
		<div class="row">
			Password: <input type="Password" name="Password" id="password">
		</div>
		<div class="row">
			<input type="button" value="Register" id="btn-register">
			<input type="button" value="Login" id="btn-login">
		</div>
	</div>
</body>
<script src="socket.io.js"></script>
<script type="text/javascript">
	g = (id) => document.getElementById(id);
	hasAskedOnce = false;

	connect = (id, pwd) => {
		socket = io('http://localhost', {id: id, pwd: pwd});
		socket.on('news', function (data) {
			console.log(data);
			socket.emit('my other event', { my: 'data' });
		});
	}

	g('btn-register').addEventListener('click', () => {
		var name = g('username').value;
		var pwd = g('password').value;
		if(!name || !pwd || name === '' || pwd === ''){
			g('input-form-label').innerHTML = 'Please Enter a valid Username and/or Password';
			return;
		}
		if(hasAskedOnce){
			g('input-form-label').innerHTML = 'Please wait while we register you with our servers.';
			connect(name, pwd);
		} else {
			g('input-form-label').innerHTML = 'Please Reconfirm Your Password (without your '+
			'password you will lose access to your inventory) and click Register again.';
			hasAskedOnce = true;
		}
	});

	g('btn-login').addEventListener('click', () => {
		console.log('Yolo');
	});
</script>
</html>