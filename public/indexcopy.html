<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>The Lambda Game</title>
	<style type="text/css">
		body {
			background: #112;
		}
		#login-form {
			color: #fff;
			margin-top: 40vh;
			text-align: center;
		}
		.row {
			overflow-x: hidden;
			width: 100%;
			margin: 40px 0 0 0;
		}
		.label {
			font-size: 2em;
			margin-bottom: 5vh;
		}
	</style>
</head>
<body>
	<div id="login-form">
		<label id="input-form-label" class="label">Enter your username if you are logging in for the First Time, or your Hash Key if you already have an account. </label>
		<div class="row">
			Username: <input type="text" name="UserName" id="username">
		</div>

		<div class="row">
			Key : <input type="Password" name="Password" id="password">
		</div>
		<div class="row">
			<input type="button" value="Register" id="btn-register">
			<input type="button" value="Login" id="btn-login">
		</div>
	</div>
</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.2.0/socket.io.js"></script>
<script type="text/javascript">
	g = (id) => document.getElementById(id);
	hasAskedOnce = false;

	connect = (id) => {
		// io.origins('*:*');
		// socket = io('http://192.168.110.68:8080/', {id: id, pwd: pwd});
		socket = io('http://localhost:8080/', {id: id});
		socket.emit('Username', id);
		socket.on('AccountExists', function(doesAccountExist) {
			g('input-form-label').innerHTML = 'Please enter a valid password';
		});
		// socket.on('news', function (data) {
		// 	console.log(data);
		// 	socket.emit('my other event', { my: 'data' });
		// });
	}
	// connectPwd = (pwd) => {
	// 	// io.origins('*:*');
	// 	// socket = io('http://192.168.110.68:8080/', {id: id, pwd: pwd});
	// 	socket = io('http://localhost:8080/', {pwd: pwd});
	// 	socket.on('news', function (data) {
	// 		console.log(data);
	// 		socket.emit('my other event', { my: 'data' });
	// 	});
	// }

	g('btn-register').addEventListener('click', () => {
		var name = g('username').value;
		if(!name|| name === ''){
			g('input-form-label').innerHTML = 'Please Enter a valid Username';
			return;
		}
		if(hasAskedOnce){
			g('input-form-label').innerHTML = 'Please wait while we register you with our servers.';
			connect(name);
		} else {
			g('input-form-label').innerHTML = 'Please Reconfirm Your Password (without your '+
			'password you will lose access to your inventory) and click Register again.';
			hasAskedOnce = true;
		}
	});

	g('btn-login').addEventListener('click', () => {
		// var pass = g('password').value ;
		// if (!pass || pass === '')
		// {
		// 	g('input-form-label').innerHTML = 'Please enter a valid password';
		// 	return ;
		// }

	});
</script>
</html>